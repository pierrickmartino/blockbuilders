{% extends 'base.html' %}

{% block content %}

<section class="section is-title-bar">
  <div class="level">
    <div class="level-left">
      <div class="level-item">
        <ul>
          <li>App</li>
          <li>Wallets</li>
        </ul>
      </div>
    </div>
    <div class="level-right">
      <div class="level-item">
        <div class="buttons is-right">
          <button type="button" data-target="add-wallet-modal" class="button is-primary jb-modal">
            <span class="icon"><i class="mdi mdi-plus-circle"></i></span>
            <span>Add</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="hero is-hero-bar">
  <div class="hero-body">
    <div class="level">
      <div class="level-left">
        <div class="level-item">
          <h1 class="title">
            Wallets
          </h1>
        </div>
      </div>
      <div class="level-right" style="display: none;">
        <div class="level-item"></div>
      </div>
    </div>
  </div>
</section>
<section class="section is-main-section">
  <div class="card has-table has-mobile-sort-spaced">
    <header class="card-header">
      <p class="card-header-title">
        <span class="icon"><i class="mdi mdi-account-multiple"></i></span>
        Wallets
      </p>
      <a href="#" class="card-header-icon">
        <span class="icon"><i class="mdi mdi-reload"></i></span>
      </a>
    </header>
    <div class="card-content">
      <div class="b-table has-pagination">
        <div class="table-wrapper has-mobile-cards">
          <table class="table is-fullwidth is-striped is-hoverable is-sortable is-fullwidth">
            <thead>
              <tr>
                <th></th>
                <th>Address</th>
                <th>Name</th>
                <th>Balance</th>
                <th># Positions</th>
                <th>Progress</th>
                <th>Created</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% for wallet in wallets %}
              <tr>
                <td class="is-image-cell">
                  <div class="image">

                  </div>
                </td>
                <td data-label="Address">{{ wallet.address }}</td>
                <td data-label="Name">{{ wallet.name }}</td>
                <td data-label="Balance">{{ wallet.balance|floatformat:"-2g" }}</td>
                <td data-label="NumPositions">{{ wallet.wallet_positions.count }}</td>
                <td data-label="Progress" class="is-progress-cell">
                  <progress max="100" class="progress is-small is-primary" value="79">79</progress>
                </td>
                <td data-label="Created">
                  <small class="has-text-grey is-abbr-like">{{ wallet.created_at }}</small>
                </td>
                <td class="is-actions-cell">
                  <div class="buttons is-right">
                    <a href="{% url 'wallet_download_info' wallet.id %}" class="button is-small is-primary" type="button">
                      <span class="icon"><i class="mdi mdi-download"></i></span>
                    </a>
                    <a href="{% url 'wallet_resync_info' wallet.id %}" class="button is-small is-primary" type="button">
                      <span class="icon"><i class="mdi mdi-reload"></i></span>
                    </a>
                    <a href="{% url 'wallet-positions-by-page' wallet.id 1 %}" class="button is-small is-primary" type="button">
                      <span class="icon"><i class="mdi mdi-eye"></i></span>
                    </a>
                    <a href="{% url 'delete_wallet' wallet.id %}" class="button is-small is-danger" type="button">
                      <span class="icon"><i class="mdi mdi-trash-can"></i></span>
                    </a>
                  </div>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="notification">
          <div class="level">
            <div class="level-left">
              <div class="level-item">
                <div class="buttons has-addons">
                  <button type="button" class="button is-active">1</button>
                </div>
              </div>
            </div>
            <div class="level-right">
              <div class="level-item">
                <small>Page 1 of 1</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div id="add-wallet-modal" class="modal">
  <div class="modal-background jb-modal-close"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Add a wallet</p>
      <button class="add jb-modal-close" aria-label="close"></button>
    </header>
    <form method="POST">
      <section class="modal-card-body">

        {% csrf_token %}
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Address</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control is-expanded has-icons-left">
                <input class="input" type="text" placeholder="Address" maxlength="150" id="id_address" name="address" required>
                <span class="icon is-small is-left"><i class="mdi mdi-pencil"></i></span>
              </p>
            </div>
          </div>
        </div>
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Name</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control is-expanded has-icons-left">
                <input class="input" type="text" placeholder="Name" maxlength="150" id="id_name" name="name">
                <span class="icon is-small is-left"><i class="mdi mdi-pencil"></i></span>
              </p>
            </div>
          </div>
        </div>

      </section>
      <footer class="modal-card-foot">
        <button class="button jb-modal-close">Cancel</button>
        <button class="button is-success jb-modal-close">Save</button>
      </footer>
    </form>
  </div>
  <button class="modal-close is-large jb-modal-close" aria-label="close"></button>
</div>
{% endblock %}